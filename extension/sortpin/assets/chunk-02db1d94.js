var h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y(e){if(e.__esModule)return e;var _=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(t){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(_,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}),_}function C(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}const c=e=>new Promise((_,t)=>{try{chrome.storage.local.get([e],function(o){_(o[e])})}catch(o){t(o)}}),d=(e,_)=>new Promise((t,o)=>{try{chrome.storage.local.set({[e]:_},function(){t()})}catch(s){o(s)}}),a=e=>new Promise((_,t)=>{try{chrome.storage.local.remove([e],function(){_()})}catch(o){t(o)}}),u=e=>new Promise((_,t)=>{try{chrome.storage.local.get(e,function(o){_(o)})}catch(o){t(o)}}),S=e=>new Promise((_,t)=>{try{chrome.storage.local.get(null,function(o){const s=Object.keys(o).filter(r=>r.startsWith(e));s.length>0?chrome.storage.local.remove(s,function(){_(s)}):_([])})}catch(o){t(o)}});var n={get:c,set:d,remove:a,getKeys:u,removeByPrefix:S};function D(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function p(e){var _=Math.floor((new Date-e)/1e3),t=_/31536e3;return t>1?Math.floor(t)+" Y":(t=_/2592e3,t>1?Math.floor(t)+" M":(t=_/86400,t>1?Math.floor(t)+" D":(t=_/3600,t>1?Math.floor(t)+" h":(t=_/60,t>1?Math.floor(t)+" m":Math.floor(_)+" s"))))}function L(e){var _=Math.floor((new Date-e)/1e3),t=_/31536e3;return t>1?Math.floor(t)+" years ago":(t=_/2592e3,t>1?Math.floor(t)+" months ago":(t=_/86400,t>1?Math.floor(t)+" days ago":(t=_/3600,t>1?Math.floor(t)+" hours ago":(t=_/60,t>1?Math.floor(t)+" minutes ago":Math.floor(_)+" seconds ago"))))}function l(e,_){const t="https://v1.pinimg.com/videos/";let o=e.replace(t,"").split("/");return o.pop(),o[1]="720p",o=o.join("/")+"/"+_+".mp4",{baseUrl:t,path:o,fullUrl:t+o}}function M(e){const _={saves:0,done:0,created_at:"",reaction_counts:0,repin_count:0,comment_count:0,like_count:0,share_count:0,image_url:"",video_url:"",native:!1,is_ai:!1};_.saves=e?.aggregated_pin_data?.aggregated_stats?.saves||0,_.done=e?.aggregated_pin_data?.aggregated_stats?.done||0,_.created_at=new Date(e?.created_at),_.reaction_counts=Object.values(e?.reaction_counts).reduce((t,o)=>t+o,0),_.repin_count=e?.repin_count||0,_.comment_count=e?.aggregated_pin_data?.comment_count||0,_.like_count=e?.like_count||0,_.share_count=e?.share_count||0,_.image_url=e?.images?.orig?.url,_.native=e?.is_native,_.is_ai=e?.digital_media_source_type===11||e?.digital_media_source_type===12||e?.digital_media_source_type===16;try{let t=e?.videos?.video_signature;if(_.video_url=e?.videos?.video_list?Object.keys(e?.videos?.video_list)?.map(o=>e?.videos?.video_list[o])[0]?.url:null,t&&_?.video_url){const o=l(_?.video_url,t);_.video_url=o?.fullUrl}}catch{_.video_url=null}try{let t=e?.story_pin_data?.pages?.[0]?.video_signature||e?.story_pin_data?.pages?.[0]?.blocks[0]?.video_signature;if(_.story_url=e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list?Object.keys(e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list)?.map(o=>e?.story_pin_data?.pages?.[0]?.blocks[0]?.video?.video_list[o])[0]?.url:null,t&&_?.story_url){const o=l(_?.story_url,t);_.story_url=o?.fullUrl}}catch{_.story_url=null}return _}const b=e=>{let t=(e?.split("/"))[3]||null;return["homefeed","overview","business","advertiser","settings","edit","engagement","news_hub","search","pin"].includes(t)?null:/^(?![0-9_]+$)[A-Za-z0-9_]{3,30}$/.test(t)?t:null};function H(e){return delete e?.description_html,delete e?.visual_objects,delete e?.link_domain,delete e?.manual_interest_tags,delete e?.closeup_attribution,delete e?.edited_fields,delete e?.rich_summary,delete e?.rich_metadata,delete e?.unified_user_note,delete e?.tracked_link,delete e?.tracking_params,delete e?.closeup_user_note,delete e?.closeup_description,delete e?.node_id,delete e?.can_delete_did_it_and_comments,delete e?.collection_pin,delete e?.comments_disabled,delete e?.did_it_disabled,delete e?.has_required_attribution_provider,delete e?.image_medium_url,delete e?.is_eligible_for_aggregated_comments,delete e?.is_eligible_for_brand_catalog,delete e?.is_eligible_for_pdp,delete e?.is_eligible_for_related_products,delete e?.is_go_linkless,delete e?.is_hidden,delete e?.is_oos_product,delete e?.is_playable,delete e?.is_product_tagging_enabled_standard_pin,delete e?.is_stale_product,delete e?.is_unsafe_for_comments,delete e?.is_v1_idea_pin,delete e?.is_whitelisted_for_tried_it,delete e?.board?.owner,delete e?.board?.node_id,delete e?.via_pinner?.node_id,delete e?.pinner?.node_id,delete e?.native_creator?.node_id,delete e?.aggregated_pin_data?.node_id,delete e?.story_pin_data?.node_id,delete e?.story_pin_data?.metadata,delete e?.story_pin_data?.has_affiliate_products,delete e?.story_pin_data?.has_product_pins,delete e?.story_pin_data?.is_deleted,delete e?.story_pin_data?.mentioned_users,delete e?.story_pin_data?.last_edited,delete e?.story_pin_data?.pages?.[0]?.image,delete e?.story_pin_data?.pages?.[0]?.image_adjusted,e}async function W(e,_,t){const o=await n.get(e);if(o){const r=o.timestamp,i=o.value!==void 0?o.value:o.count;if(Date.now()-r<_)return i}const s=await t();return await n.set(e,{count:s,value:s,timestamp:Date.now()}),s}const w="POWER_BUTTON",B="SIDE_BAR_BUTTON",U="SIDE_BAR_IFRAME",Y="SIDE_BAR_POSITION",k="SIDE_BAR_BEHAVIOR",j="IDENTITY_ID",F="IDENTITY_EMAIL",Z="PINTEREST_DATA",V="PINTEREST_ONE_LICENCE_CODE",G="PINTEREST_ONE_ME",q="PINS_DISPLAY",K="PINS_SORT_FIELD",x="PINS_PAGE_SIZE",z="PINS_AUTO_PLAY",$="PINS_PINNERS",X="BOARDS_DISPLAY",J="BOARDS_SORT_FIELD",Q="BOARDS_PAGE_SIZE",ee="PINNERS_DISPLAY",te="PINNERS_SORT_FIELD",_e="PINNERS_PAGE_SIZE",R="SORTPIN_CARD_SHOW",I="SORTPIN_CARD_SHOW_SAVES",E="SORTPIN_CARD_SHOW_REACTIONS",O="SORTPIN_CARD_SHOW_LIKES",N="SORTPIN_CARD_SHOW_REPINS",A="SORTPIN_CARD_SHOW_COMMENTS",T="SORTPIN_CARD_SHOW_SHARES",g="SORTPIN_CARD_SHOW_CREATED_AT",P="SORTPIN_CARD_SHOW_TOOLBARS",m="SORTPIN_CARD_SHOW_AI",f="SORTPIN_CARD_TRADEMARK",v="SORTPIN_CARD_SIZE",oe=[R,I,E,O,N,A,T,g,P,m,f,v],se="SORTPIN_SHOW_DELAY",re="SORTPIN_DELAY",ne="SORTPIN_SHOW_DETAIL_PIN",le="SMART_COLLECT_ENABLED",ie="LAST_CLEANUP",ce="LAST_REMINDER_SHOWN",de="REMINDER_DISMISSED_COUNT",ae=30*60*1e3,ue=60*60*1e3;export{M as $,Z as A,q as B,K as C,x as D,z as E,X as F,J as G,Q as H,j as I,ee as J,te as K,ie as L,_e as M,se as N,re as O,$ as P,ne as Q,le as R,oe as S,ce as T,ae as U,ue as V,de as W,H as X,C as Y,W as Z,y as _,w as a,R as b,f as c,I as d,E as e,O as f,N as g,A as h,T as i,g as j,L as k,n as l,P as m,m as n,v as o,b as p,h as q,D as r,V as s,p as t,G as u,B as v,U as w,Y as x,k as y,F as z};
